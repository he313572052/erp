<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>加工刀具管理</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<link rel="stylesheet" href="../../../layui/css/layui.css" media="all" />
		<link rel="stylesheet" type="text/css" href="../../../iconfont/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="../../../plugins/mCustomScrollbar/css/jquery.mCustomScrollbar.css"
		/>
		<link rel="stylesheet" href="../../../css/machine.css" media="all" />
	</head>

	<body class="childrenBody">
		<div class="layui-fluid knife">
			<blockquote class="layui-btns">
				<div class="layui-btn-group">
					<button class="layui-btn layui-btn-sm layui-btn-blue btn" data-title="新增刀具" data-event="add"><i class="layui-icon layui-icon-add-1"></i></button>
					<button class="layui-btn layui-btn-sm layui-btn-blue btn" data-title="刀具入库" data-event="enter"><i class="iconfont icon-ruku"></i></button>
					<button class="layui-btn layui-btn-sm layui-btn-blue btn" data-title="刀具出库" data-event="out"><i class="iconfont icon-chuku"></i></button>
					<button class="layui-btn layui-btn-sm layui-btn-blue btn" data-title="刀具出库记录" data-event="record"><i class="iconfont icon-chakan"></i></button>
					<button class="layui-btn layui-btn-sm layui-btn-blue btn" data-title="导出" data-event="export"><i class="iconfont icon-daochu"></i></button>
					<button class="layui-btn layui-btn-sm layui-btn-blue btn" data-title="搜索" data-event="search"><i class="layui-icon layui-icon-search"></i></button>
					<button class="layui-btn layui-btn-sm layui-btn-blue btn" data-title="刷新" data-event="refresh"><i class="layui-icon layui-icon-refresh"></i></button>
				</div>
			</blockquote>
			<blockquote class="layui-tools layui-tools-margin">
				<div class="layui-form">
					<div class="layui-inline">
						<div class="layui-input-inline">
							<select name="">
								<option>刀具类型</option>
								<option value="0">全部</option>
								<option value="DJ">倒角刀</option>
								<option value="HJJ">合金绞刀</option>
								<option value="ZD">锥度刀</option>
							</select>
						</div>
						<div class="layui-input-inline">
							<select name="">
								<option>组别</option>
								<option value="0">全部</option>
								<option value="DJ">复模组</option>
								<option value="HJJ">模具组</option>
								<option value="ZD">机壳组</option>
							</select>
						</div>
						<div class="layui-input-inline">
							<div class="layui-btn-input">
								<input type="" name="" id="" value="" placeholder="部门" />
								<button class="moreBtn"><i class="layui-icon layui-icon-more"></i></button>
							</div>
						</div>
						<div class="layui-input-inline">
							<input type="text" name="" placeholder="刀具编号" class="layui-input">
						</div>
					</div>
				</div>
			</blockquote>
			<div class="layui-row layui-col-space10">
				<div class="layui-col-md9">
					<div class="layui-table-1">
						<div class="layui-table-caption">
							<div>加工刀具资料</div>
							<div></div>
						</div>
						<div>
							<table class="layui-simple-table" id="knifeTable" lay-filter="knifeTable"></table>
						</div>
					</div>
				</div>
				<div class="layui-col-md3">
					<div class="list">
						<h2>刀具详情</h2>
						<div>
							<div class="head">
								<span>机台编号</span><span>旧刀库存</span>
							</div>
							<div class="body scroll">
								<ul>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
									<li><span>JKJD009</span><span>1</span></li>
								</ul>
							</div>
							<div class="foot">
								总计：15
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/html" id="operation">
			<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i class="layui-icon layui-icon-edit"></i></a>
			<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i class="layui-icon layui-icon-delete"></i></a>
		</script>
		<script src="../../../plugins/jquery/jquery-3.2.1.min.js" type="text/javascript"
		 charset="utf-8"></script>
		<script src="../../../plugins/mCustomScrollbar/js/jquery.mCustomScrollbar.min.js"
		 type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../../../layui/layui.js"></script>
		<script type="text/javascript">
			var row;
			layui.use(['layer', 'jquery', 'form', 'element', 'table'],
				function() {
					var layer = parent.layer == undefined ? layui.layer : parent.layer,
						_layer = layui.layer,
						form = layui.form,
						$ = layui.jquery,
						table = layui.table;
					$('.btn').mouseenter(function() {
						var title = $(this).attr('data-title');
						_layer.tips(title, this, {
							tips: [1, '#1E82D2']
						})
					}).click(function() {
						var layEvent = $(this).data('event');
						var title = $(this).data('title');
						if(layEvent === 'export') {
							E.showLoad('导出成功')
						} else if(layEvent === 'refresh') {
							E.showLoad('刷新成功')
						} else if(layEvent === 'add') {
							E.page(title, '../machine/knife/knife-add.html', '810px', '460px')
						} else if(layEvent === 'enter') {
							E.tip(row, function() {
								E.page(title, '../machine/knife/knife-enter.html', '685px',
									'365px');
							})
						} else if(layEvent === 'out') {
							E.tip(row, function() {
								E.page(title, '../machine/knife/knife-out.html', '570px',
									'365px');
							})

						} else if(layEvent === 'record') {
							E.tip(row, function() {
								E.page(title, '../machine/knife/knife-record.html', '900px',
									'610px');
							})
						}
					});
					$('.moreBtn').click(function() {
						event.preventDefault();
						layer.open({
							title: '请选择部门',
							type: 2,
							skin: 'layer-skin-class',
							area: ['800px', '610px'],
							resiez: false,
							content: '../layer/department.html'
						})
					})
					table.render({
						elem: '#knifeTable',
						height: 495,
						limits: [10, 15, 20],
						url: '../../../json/knife-list.json',
						page: true,
						cols: [
							[{
									type: 'numbers',
									width: 65,
									title: '序号',
									sort: true,
									fixed: 'left'
								}, {
									field: 'knife_code',
									title: '刀具代码',
									align: 'center',
									width: 130
								}, {
									field: 'knife_num',
									title: '刀具编号',
									align: 'center',
									minWidth: 90
								}, {
									field: 'knife_type',
									align: 'center',
									title: '刀具类型',
									width: 90
								}, {
									field: 'knife_spec',
									align: 'center',
									title: '品名规格',
									width: 90
								}, {
									field: 'edge_length',
									align: 'center',
									title: '刀具刃长',
									width: 90
								}, {
									field: 'overall_length',
									title: '刀具总长',
									align: 'center',
									width: 90
								},
								{
									field: 'news_stock',
									title: '新刀库存',
									align: 'center',
									width: 90
								}, {
									field: 'old_stock',
									align: 'center',
									title: '旧刀库存',
									width: 90
								}, {
									field: 'department',
									title: '部门',
									minWidth: 90
								}, {
									field: 'group',
									title: '组别',
									width: 90

								}, {
									field: 'remarks',
									minWidth: 60,
									title: '备注'
								},
								{
									title: '操作',
									fixed: 'right',
									width: 100,
									toolbar: '#operation'
								}
							]
						]
					});
					table.on('row(knifeTable)', function(obj) {
						obj.tr.addClass('tr-selected').siblings('tr').removeClass(
							'tr-selected')
						row = obj;
					});
					table.on('tool(knifeTable)', function(obj) {
						var data = obj.data;
						var layEvent = obj.event;
						var tr = obj.tr;
						if(layEvent === 'edit') { //查看
							E.page('编辑', '../machine/knife/knife-add.html', '810px', '460px');
						} else if(layEvent === 'del') {
							layer.confirm('您确定删除吗?', {
								icon: 3,
								title: '询问'
							}, function(index) {
								obj.del();
								layer.msg('删除成功');
							})
						}
					});
					//美化滚动条
					$.mCustomScrollbar.defaults.axis = "y";
					$(".scroll").mCustomScrollbar({
						theme: "minimal-dark"
					});
					var E = (function(obj) {
						obj.page = function(title, url, w, h) {
							layer.open({
								type: 2,
								skin: 'layer-skin-class',
								resize: false,
								title: title,
								area: [w, h],
								content: url
							});
						}
						obj.showLoad = function(msg) {
							layer.load(1, {
								time: 2 * 1000
							})
							setTimeout(function() {
								layer.msg(msg);
							}, 2 * 1000)
						}
						obj.tip = function(row, callback) {
							if(!row) {
								layer.msg('请选择行');
								return;
							}
							if(callback !== undefined && typeof(callback) === 'function') {
								callback();
							}
						}
						return obj
					})(E || {})
				});
		</script>
	</body>

</html>